<div>
    <div id="div_NNN" class="displayblock">OUTPUT</div>
    <input type="hidden" name="xml_file" value="config/sample.xml" />
    DNS:
    <input id="txt1_NNN" type="text" name="/configuration/websocket/uri" />
    clientID:
    <input id="txt2_NNN" type="text" name="/configuration/oauth20/clientid" onchange="post_form()" />
    <button class="hidden_button" id="exec_button_NNN" onclick="post_form()">exec</button>
</div>
<script>
var submittable=true; // Flag to prevent multiple "form" submissions

function init_block() {
    console.log("save_to_xml");
    $("#exec_button_NNN").attr('class', 'active_button');
    $("#txt1_NNN").focus();
}

// Get command from textfield #txt_NNN 
function post_form() {
    if (submittable) {
        submittable = false;
    } else {
        return false;
    }

    URL = "/xml/edit/" +$('input[name=xml_file]').val(); // This should be interpreted as direction to edit XML on server side.
    console.log("Calling "+ URL)
    
    var formData = {};
    // Select all <input type="text"> tags
    $(":text").each(function(index) {
        formData[$(this).attr("name")] = $(this).val();
    });
    console.log(formData)

    $("body").append($("<div class=displayblock>").load(URL, formData, function(data) {
        data = data.replace(/\\n/g, "\n");
        data = data.replace(/</g, "&lt;");
        data = data.replace(/>/g, "&gt;");
        console.log(data);
        $(this).html("New:\n\n" + data);
    }));

    return false;
}
init_block();
</script>